{% extends 'layouts/base-presentation.html' %}

{% block title %} HealthHub {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block body_class %} index-page {% endblock body_class %}

{% block content %}

  <header class="header-2">
    <div class="page-header section-height-45 relative" style="background-image: url('/static/assets/img/curved-images/pexels-anna-shvets-4226264.jpg')">
      <div class="container">
        <div class="row">
          <div class="col-lg-7 text-center mx-auto">
            
          </div>
        </div>
      </div>
      <div class="position-absolute w-100 z-index-1 bottom-0">
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 40" preserveAspectRatio="none" shape-rendering="auto">
          <defs>
            <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
          </defs>
          <g class="moving-waves">
            <use xlink:href="#gentle-wave" x="48" y="-1" fill="rgba(255,255,255,0.40" />
            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.35)" />
            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.25)" />
            <use xlink:href="#gentle-wave" x="48" y="8" fill="rgba(255,255,255,0.20)" />
            <use xlink:href="#gentle-wave" x="48" y="13" fill="rgba(255,255,255,0.15)" />
            <use xlink:href="#gentle-wave" x="48" y="16" fill="rgba(255,255,255,0.95" />
          </g>
        </svg>
      </div>
    </div>

    <style>
      /* Styles for the cadre */
      .cadre {
          width: 300px; /* Adjust the width of the cadre */
          height: 500px; /* Adjust the height of the cadre */
          display: flex;
          justify-content: center; /* Center horizontally */
          align-items: center; /* Center vertically */
      }
      .cadre2 {
          width: 100px; /* Adjust the width of the cadre */
          height: 100px; /* Adjust the height of the cadre */
          display: flex;
          justify-content: center; /* Center horizontally */
          align-items: center; /* Center vertically */
      }

      /* Styles for the image */
      .cadre img {
          max-width: 100%; /* Make sure the image doesn't exceed the cadre's width */
          max-height: 100%; /* Make sure the image doesn't exceed the cadre's height */
      }
  </style>
  </header>

  <!-- END Section Content -->
  <!-- -------   START PRE-FOOTER 2 - simple social line w/ title & 3 buttons    -------- -->

    <section>
      <div class="container py-4">
        <div class="row">
          <div class="col-lg-7 mx-auto d-flex justify-content-center flex-column">
            <h3 class="text-center">Brain MR Image Generation</h3>
            <form id="prediction-form">
              Seed: <input type="range" id="Seed" name="Seed" class="range w-full appearance-none transition rounded h-4 svelte-951xr6" min="0" max="65536" step="100"><br>

        Noise Mode: 
        <input type="radio" id="const" name="noise_mode" value="const" checked style="margin-right: 5px;">
        <label for="const">const</label>
        <input type="radio" id="random" name="noise_mode" value="random" style="margin-right: 5px;">
        <label for="random">random</label>
        <input type="radio" id="none" name="noise_mode" value="none" style="margin-right: 5px;">
        <label for="none">none</label><br>

        Truncation psi: <input type="range" id="truncation_psi" name="truncation_psi" step="0.05" min="0" max="2" value="1" class="range w-full appearance-none transition rounded h-4 svelte-951xr6"><br>

        <input type="submit" value="Generate" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer;">

          </form>
          <br>
          <h2>Generated Image:</h2>
          <img id="result_image"  alt="Generated Image" style="max-width: 512px; max-height: 512px;">
          <div class=" cadre2 w-100">
            
              <button id="download_button" class="btn bg-gradient-dark"><i class="fa fa-download"></i> Download</button>
            </div>
          <script>
            // JavaScript to handle form submission and display the result image
            document.getElementById("prediction-form").addEventListener("submit", function (event) {
                event.preventDefault();
                const formData = new FormData(event.target);
                fetch("/predict", {
                    method: "POST",  // Ensure that the method is set to POST
                    body: formData,
                })
                .then((response) => response.json())
                .then((data) => {
                    document.getElementById("result_image").src = "data:image/png;base64," + data.result_image;
                });
            });
            const resultImage = document.getElementById('result_image');
        const downloadButton = document.getElementById('download_button');

        // Add an event listener to the download button
        downloadButton.addEventListener('click', function() {
            // Create a temporary anchor element
            const downloadLink = document.createElement('a');
            downloadLink.href = resultImage.src;
            downloadLink.download = 'downloaded-image.jpg'; // Set the desired file name
            downloadLink.style.display = 'none';

            // Append the anchor to the body and trigger the click event
            document.body.appendChild(downloadLink);
            downloadLink.click();

            // Remove the anchor element from the DOM
            document.body.removeChild(downloadLink);
          });

          // Set the image source dynamically (replace 'your-image-url.jpg' with the actual image URL)
          const imageUrl = 'your-image-url.jpg'; // Replace with your image URL
          resultImage.src = imageUrl;
        </script>
      
            
          </div>
        </div>
      </div>
    </section>

    <!-- <div class=" cadre2 w-100">
    <a href="../../static/assets/mdl/aa.jpeg" download>
      <button class="btn bg-gradient-dark"><i class="fa fa-download"></i> Download</button></a>
    </div> -->
    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Auto width -->

    
  
 
  


  <!-- -------   END PRE-FOOTER 2 - simple social line w/ title & 3 buttons    -------- -->
  
{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

  <script src="/static/assets/js/plugins/countup.min.js"></script>
  <script src="/static/assets/js/plugins/choices.min.js"></script>
  <script src="/static/assets/js/plugins/rellax.min.js"></script>
  <script src="/static/assets/js/plugins/tilt.min.js"></script>
  <script src="/static/assets/js/plugins/choices.min.js"></script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="/static/assets/js/soft-design-system.min.js?v=1.0.1" type="text/javascript"></script>
  <script type="text/javascript">
    if (document.getElementById('state1')) {
      const countUp = new CountUp('state1', document.getElementById("state1").getAttribute("countTo"));
      if (!countUp.error) {
        countUp.start();
      } else {
        console.error(countUp.error);
      }
    }
    if (document.getElementById('state2')) {
      const countUp1 = new CountUp('state2', document.getElementById("state2").getAttribute("countTo"));
      if (!countUp1.error) {
        countUp1.start();
      } else {
        console.error(countUp1.error);
      }
    }
    if (document.getElementById('state3')) {
      const countUp2 = new CountUp('state3', document.getElementById("state3").getAttribute("countTo"));
      if (!countUp2.error) {
        countUp2.start();
      } else {
        console.error(countUp2.error);
      };
    }
  </script>

{% endblock javascripts %}
